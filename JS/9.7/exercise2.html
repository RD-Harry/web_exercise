<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下拉菜单关联</title>
</head>
<body>
    <script src="js/jquery.min.js"></script>
    <select name="" id="city"></select>
    <select name="" id="area"></select>
    <script>
        //思路；地区是根据城市菜单走的，所以
        //将地区菜单作为城市菜单的子
        var arr=
        [
            {
                'name':'请选择',
                'value':0,
                'child':[
                    {
                    'cname':'请选择',
                    'cvalue':'0'

                    }
                ]

            },
            {
                'name':'北京',
                'value':'beijing',
                'child':[
                    {
                        'cname':'北京1',
                        'cvalue':'beijing1'

                    },
                    {
                        'cname':'北京2',
                        'cvalue':'beijing2'

                    }
                ]
            },
            {
                'name':'上海',
                'value':'shanghai',
                'child':[
                    {
                        'cname':'上海1',
                        'cvalue':'shanghai1'

                    },
                    {
                        'cname':'上海2',
                        'cvalue':'shanghai2'

                    }
                ]
            }
        ]

            // 先加载一级下拉菜单
        $.each(arr,function(n,v){
            //先遍历得到arr里面所有的元素
            console.log(v)
            // {name: "请选择", value: "0"}
            // {name: "北京", value: "beijing"}
            // {name: "上海", value: "shanghai"}

            // 将遍历得到的一个非元素添加到option中，并将option追加到select里面
            $('#city').append(`<option value="${v.value}">${v.name}</option>`)
            
        })


        // $('#city').on('click',function () 
        $('#city').on('change',function () 
        // 点一次触发一次，但是主城市不变时，下面的地区肯定也不变
        // 因此这里用click不合适
        // 当选择改变时触发，使用change()
        {
            console.log('hello hannah')
            //先通过代码找到当前城市下拉菜单的值value，注意  是外层的value
            //然后遍历数据找到所有的城市 ，将所有城市的值一个一个和value比对
            //相同就是找到了相应的城市
            //这个城市中的有child结果，将child放到地区下拉菜单中显示


            // 找到当前下拉菜单中的值
            $('#city').val()
            // console.log($('#city').val())

            // 从大的列表中一个一个找和下拉菜单的值一致的值
            $.each(arr,function(i,o) 
            {
                if(o.value==$('#city').val())
                {
                    $('#area').html('')//初始化页面元素，将area的内容清空
                    $.each(o.child,function(i,o2)
                    // 遍历子菜单中的内容，然后添加到option中
                    {
                        // 将找到的大表的字表的内容添加到option中

                        // 每次都是添加新内容，内容越加越多
                        // 需要每次只加新内容，在遍历添加所有的数据之前之前重置页面
                       
                        $('#area').append(`<option value="${o2.cvalue}">${o2.cname}</option>`)
                    })
                }   
            })



        })
    </script>

</body>
</html>